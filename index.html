<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Download Quran & Hisnul Muslim App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Redirecting..." />
  <meta name="robots" content="noindex, nofollow">
  <meta http-equiv="refresh" content="3;url=https://www.hisnulmuslimdua.com/">

  <script>
    window.onload = function () {
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const platform = navigator.platform || '';
      const maxTouchPoints = navigator.maxTouchPoints || 0;
      const uaData = navigator.userAgentData || {};

      // --- Robust Android detection ---
      const isAndroid =
        /android/i.test(ua) ||                     // Normal Android UA
        (uaData.platform === 'Android') ||         // Modern UA API
        (/Linux/i.test(platform) && /Mobile/i.test(ua)) || // Linux+Mobile browsers
        (/arm/i.test(platform) && !/iPhone|iPad|iPod/i.test(ua)); // Arm-based devices (Vivo, etc.)

      // --- Reliable iOS detection ---
      const isIOS = (() => {
        if (/iPad|iPhone|iPod/.test(ua)) return true;              // Normal iOS
        if (platform === 'MacIntel' && maxTouchPoints > 1) return true; // Chrome/Safari iOS
        if (/CriOS|FxiOS/i.test(ua)) return true;                  // Chrome/Firefox iOS
        if (/Version\/.*Safari/i.test(ua) && /Mobile/i.test(ua)) return true; // Safari Mobile
        return false;
      })();

      // --- Redirects ---
      let redirected = false;
      let fallbackTimer = null;

      // Detect if store app opened (user left the page)
      document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
          clearTimeout(fallbackTimer);
          redirected = true;
        }
      });

      if (isAndroid) {
        // Try to open Play Store app, fallback to browser if unavailable
        window.location.replace("market://search?q=pub%3AMuslim+Akhi");
        fallbackTimer = setTimeout(function() {
          if (!redirected) {
            redirected = true;
            window.location.replace("https://play.google.com/store/apps/developer?id=Muslim+Akhi&hl=en");
          }
        }, 1000);
      } else if (isIOS) {
        // Try to open App Store app, fallback to browser if unavailable
        window.location.replace("itms-apps://apps.apple.com/us/app/hisnul-muslim-dua-dhikr/id1544699159");
        fallbackTimer = setTimeout(function() {
          if (!redirected) {
            redirected = true;
            window.location.replace("https://apps.apple.com/us/app/hisnul-muslim-dua-dhikr/id1544699159");
          }
        }, 1000);
      } else {
        window.location.replace("https://www.hisnulmuslimdua.com/");
      }
    };
  </script>
</head>
<body>
  <p>Redirecting...</p>
  <p>If you are not redirected automatically, <a href="https://www.hisnulmuslimdua.com/">click here</a>.</p>
</body>
</html>
